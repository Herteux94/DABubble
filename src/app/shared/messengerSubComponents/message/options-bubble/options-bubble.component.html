<div (mouseleave)="this.messageOptionsOpen = false" [ngClass]="ownMessage? 'optionsBubbleOwnMsg' : 'optionsBubble'">

  <div *ngIf="showEmojis" [ngClass]="emojiPickerDirection === 'up' ? 'emojiPickerUp' : 'emojiPickerDown'">
    <app-emoji-picker (emojiSelect)="onEmojiSelected($event)"></app-emoji-picker>
  </div>
  <div class="optionsBubbleContent" *ngIf="!showEmojis">
    @if(this.messengerType != 'thread') {
    <div class="svgContainer" (click)="onSvgClick('âœ…')">
      <svg width="24" height="24" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20Z"
          fill="#4BD37B" />
        <path d="M14.6668 4L7.66679 11.2L5.33346 8.8L3.00012 11.2L7.66679 16L17.0001 6.4L14.6668 4Z" fill="white" />
      </svg>
    </div>
    <div class="svgContainer" (click)="onSvgClick('ðŸ™Œ')">
      <svg width="24" height="24" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M8.33777 0L10.0044 3.33333L11.6711 0H8.33777ZM14.3044 0.333333L14.0711 4.06667L17.1711 2L14.3044 0.333333ZM2.83777 2L5.9711 4.06667L5.73777 0.333333L2.83777 2Z"
          fill="#4AA9FF" />
        <path d="M6.13768 20H2.20435V15.7L6.80435 16.7666C5.70435 17.9333 6.13768 20 6.13768 20Z" fill="#EBA352" />
        <path
          d="M5.77089 20H1.37089C1.37089 20 1.43756 17.8667 0.704224 16.0333L6.20422 16.8333C5.57089 18.4667 5.77089 20 5.77089 20ZM5.33756 14.1333H7.00422V6.73333C7.00422 6.23333 6.63756 5.83333 6.17089 5.83333C5.70422 5.83333 5.33756 6.23333 5.33756 6.76667V14.1333ZM3.37089 14.1333H5.33756V6.1C5.33756 5.5 4.90422 5 4.33756 5C3.80422 5 3.33756 5.5 3.33756 6.1V14.1333H3.37089Z"
          fill="#FFDD67" />
        <path
          d="M1.67091 14.1333H3.40425V6.56664C3.40425 6.03331 3.00425 5.59998 2.53758 5.59998C2.07091 5.59998 1.67091 6.03331 1.67091 6.56664V14.1333ZM0.870915 6.73331C0.437581 6.73331 0.104248 7.13331 0.104248 7.63331V14.1333H1.67091V7.63331C1.67091 7.13331 1.30425 6.73331 0.870915 6.73331Z"
          fill="#FFDD67" />
        <path
          d="M6.171 5.8H6.00434C6.40434 5.86667 6.70434 6.26667 6.70434 6.7V14.1333H7.00434V6.73333C7.00434 6.23333 6.63767 5.8 6.171 5.8ZM4.371 5C4.30434 5 4.271 5 4.23767 5.03333C4.70434 5.1 5.071 5.56667 5.071 6.1V11.4667L5.37101 11.8V6.1C5.33767 5.5 4.90434 5 4.371 5ZM2.53767 5.6H2.40434C2.80434 5.66667 3.10434 6.06667 3.10434 6.53333V11.4333L3.40434 11.7667V6.56667C3.371 6.03333 3.00434 5.6 2.53767 5.6ZM0.871004 6.73333C0.804338 6.73333 0.771004 6.73333 0.737671 6.76667C1.10434 6.83333 1.371 7.2 1.371 7.63333V11.4667L1.671 11.8V7.63333C1.671 7.13333 1.30434 6.73333 0.871004 6.73333Z"
          fill="#EBA352" />
        <path
          d="M9.80434 10.7334C9.30433 10.1667 8.30433 10.4334 7.60433 11.9C7.10433 12.9 6.971 12.7 6.70434 12.7667V11.8667C6.70434 11.8667 0.0710007 11.4334 0.0710007 12.4334C0.0710007 12.4334 -0.228999 14.9 0.404334 16.4334C1.371 18.7334 6.30434 19.3334 7.83767 15.4334C8.13767 14.6667 8.571 13.8334 8.90434 13C9.33767 12 10.371 11.4 9.80434 10.7334Z"
          fill="#FFDD67" />
        <path
          d="M9.47112 10.5C10.5378 11.3 8.57112 12.8333 7.63778 15.2C6.30445 18.6 2.40445 18.6 0.771118 17.0333C2.27112 18.8 6.43779 19.1333 7.83779 15.4333C8.77112 13.0333 11.0378 11.2 9.47112 10.5Z"
          fill="#EBA352" />
        <path
          d="M7.0044 12.7333C5.7044 12.2666 2.97106 13.1666 3.33773 15.7666C3.33773 13.3333 5.5044 12.7666 6.7044 12.7666C6.87106 12.7666 7.0044 12.7333 7.0044 12.7333ZM13.8711 20H17.8044V15.7L13.2044 16.7666C14.3044 17.9333 13.8711 20 13.8711 20Z"
          fill="#EBA352" />
        <path
          d="M14.2377 20H18.6377C18.6377 20 18.5711 17.8667 19.3044 16.0333L13.8044 16.8333C14.4377 18.4667 14.2377 20 14.2377 20ZM14.6711 14.1333H13.0044V6.73333C13.0044 6.23333 13.3711 5.83333 13.8377 5.83333C14.3044 5.83333 14.6711 6.23333 14.6711 6.76667V14.1333ZM16.6377 14.1333H14.6711V6.1C14.6711 5.5 15.1044 5 15.6711 5C16.2044 5 16.6711 5.5 16.6711 6.1V14.1333H16.6377Z"
          fill="#FFDD67" />
        <path
          d="M18.3376 14.1333H16.6042V6.56664C16.6042 6.03331 17.0042 5.59998 17.4709 5.59998C17.9376 5.59998 18.3376 6.03331 18.3376 6.56664V14.1333ZM19.1376 6.73331C19.5709 6.73331 19.9042 7.13331 19.9042 7.63331V14.1333H18.3376V7.63331C18.3376 7.13331 18.7042 6.73331 19.1376 6.73331Z"
          fill="#FFDD67" />
        <path
          d="M13.8377 5.8H14.0044C13.6044 5.86667 13.3044 6.26667 13.3044 6.7V14.1333H13.0044V6.73333C13.0044 6.23333 13.3711 5.8 13.8377 5.8ZM15.6377 5C15.7044 5 15.7377 5 15.7711 5.03333C15.3044 5.1 14.9377 5.56667 14.9377 6.1V11.4667L14.6377 11.8V6.1C14.6711 5.5 15.1044 5 15.6377 5ZM17.4711 5.6H17.6044C17.2044 5.66667 16.9044 6.06667 16.9044 6.53333V11.4333L16.6044 11.7667V6.56667C16.6377 6.03333 17.0044 5.6 17.4711 5.6ZM19.1377 6.73333C19.2044 6.73333 19.2377 6.73333 19.2711 6.76667C18.9044 6.83333 18.6377 7.2 18.6377 7.63333V11.4667L18.3377 11.8V7.63333C18.3377 7.13333 18.7044 6.73333 19.1377 6.73333Z"
          fill="#EBA352" />
        <path
          d="M10.2044 10.7334C10.7044 10.1667 11.7044 10.4334 12.4044 11.9C12.9044 12.9 13.0378 12.7 13.3044 12.7667V11.8667C13.3044 11.8667 19.9378 11.4334 19.9378 12.4334C19.9378 12.4334 20.2378 14.9 19.6044 16.4334C18.6378 18.7334 13.7044 19.3334 12.1711 15.4334C11.8711 14.6667 11.4378 13.8334 11.1044 13C10.6711 12 9.63777 11.4 10.2044 10.7334Z"
          fill="#FFDD67" />
        <path
          d="M10.5378 10.5C9.47114 11.3 11.4378 12.8333 12.3711 15.2C13.7045 18.6 17.6045 18.6 19.2378 17.0333C17.7378 18.8 13.5711 19.1333 12.1711 15.4333C11.2378 13.0333 8.97114 11.2 10.5378 10.5Z"
          fill="#EBA352" />
        <path
          d="M13.0045 12.7333C14.3045 12.2666 17.0378 13.1666 16.6712 15.7666C16.6712 13.3333 14.5045 12.7666 13.3045 12.7666C13.1379 12.7666 13.0045 12.7333 13.0045 12.7333Z"
          fill="#EBA352" />
      </svg>
    </div>
    }
    <div class="svgContainer" (click)="toggleEmojiPicker()">
      <svg class="changeColor" width="24" height="24" viewBox="0 0 24 24" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <mask id="mask0_1823_21631" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
          height="24">
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_1823_21631)">
          <path
            d="M12 22C10.6167 22 9.31667 21.7375 8.1 21.2125C6.88333 20.6875 5.825 19.975 4.925 19.075C4.025 18.175 3.3125 17.1167 2.7875 15.9C2.2625 14.6833 2 13.3833 2 12C2 10.6167 2.2625 9.31667 2.7875 8.1C3.3125 6.88333 4.025 5.825 4.925 4.925C5.825 4.025 6.88333 3.3125 8.1 2.7875C9.31667 2.2625 10.6167 2 12 2C12.75 2 13.4792 2.07917 14.1875 2.2375C14.8958 2.39583 15.5667 2.625 16.2 2.925C16.1333 3.09167 16.0833 3.26667 16.05 3.45C16.0167 3.63333 16 3.81667 16 4C16 4.23333 16.025 4.45417 16.075 4.6625C16.125 4.87083 16.1917 5.06667 16.275 5.25C15.6583 4.86667 14.9917 4.5625 14.275 4.3375C13.5583 4.1125 12.8 4 12 4C9.78333 4 7.89583 4.77917 6.3375 6.3375C4.77917 7.89583 4 9.78333 4 12C4 14.2167 4.77917 16.1042 6.3375 17.6625C7.89583 19.2208 9.78333 20 12 20C14.2167 20 16.1042 19.2208 17.6625 17.6625C19.2208 16.1042 20 14.2167 20 12C20 11.3333 19.9208 10.6917 19.7625 10.075C19.6042 9.45833 19.3833 8.875 19.1 8.325C19.3667 8.54167 19.6583 8.70833 19.975 8.825C20.2917 8.94167 20.6333 9 21 9C21.0833 9 21.1708 8.99583 21.2625 8.9875C21.3542 8.97917 21.4417 8.96667 21.525 8.95C21.675 9.43333 21.7917 9.92917 21.875 10.4375C21.9583 10.9458 22 11.4667 22 12C22 13.3833 21.7375 14.6833 21.2125 15.9C20.6875 17.1167 19.975 18.175 19.075 19.075C18.175 19.975 17.1167 20.6875 15.9 21.2125C14.6833 21.7375 13.3833 22 12 22ZM15.5 11C15.9333 11 16.2917 10.8583 16.575 10.575C16.8583 10.2917 17 9.93333 17 9.5C17 9.06667 16.8583 8.70833 16.575 8.425C16.2917 8.14167 15.9333 8 15.5 8C15.0667 8 14.7083 8.14167 14.425 8.425C14.1417 8.70833 14 9.06667 14 9.5C14 9.93333 14.1417 10.2917 14.425 10.575C14.7083 10.8583 15.0667 11 15.5 11ZM8.5 11C8.93333 11 9.29167 10.8583 9.575 10.575C9.85833 10.2917 10 9.93333 10 9.5C10 9.06667 9.85833 8.70833 9.575 8.425C9.29167 8.14167 8.93333 8 8.5 8C8.06667 8 7.70833 8.14167 7.425 8.425C7.14167 8.70833 7 9.06667 7 9.5C7 9.93333 7.14167 10.2917 7.425 10.575C7.70833 10.8583 8.06667 11 8.5 11ZM12 17.5C13.1833 17.5 14.2292 17.175 15.1375 16.525C16.0458 15.875 16.7 15.0333 17.1 14H6.9C7.3 15.0333 7.95417 15.875 8.8625 16.525C9.77083 17.175 10.8167 17.5 12 17.5ZM20 5H19C18.7167 5 18.4792 4.90417 18.2875 4.7125C18.0958 4.52083 18 4.28333 18 4C18 3.71667 18.0958 3.47917 18.2875 3.2875C18.4792 3.09583 18.7167 3 19 3H20V2C20 1.71667 20.0958 1.47917 20.2875 1.2875C20.4792 1.09583 20.7167 1 21 1C21.2833 1 21.5208 1.09583 21.7125 1.2875C21.9042 1.47917 22 1.71667 22 2V3H23C23.2833 3 23.5208 3.09583 23.7125 3.2875C23.9042 3.47917 24 3.71667 24 4C24 4.28333 23.9042 4.52083 23.7125 4.7125C23.5208 4.90417 23.2833 5 23 5H22V6C22 6.28333 21.9042 6.52083 21.7125 6.7125C21.5208 6.90417 21.2833 7 21 7C20.7167 7 20.4792 6.90417 20.2875 6.7125C20.0958 6.52083 20 6.28333 20 6V5Z"
            fill="black" />
        </g>
      </svg>
    </div>
    @if(this.messengerType == 'channels') {
    <div class="svgContainer" (click)="this.navigateToThread()">
      <svg class="changeColor" width="24" height="24" viewBox="0 0 24 24" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <mask id="mask0_1823_21561" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
          height="24">
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_1823_21561)">
          <path
            d="M7 14H17C17.2833 14 17.5207 13.904 17.712 13.712C17.904 13.5207 18 13.2833 18 13C18 12.7167 17.904 12.479 17.712 12.287C17.5207 12.0957 17.2833 12 17 12H7C6.71667 12 6.479 12.0957 6.287 12.287C6.09567 12.479 6 12.7167 6 13C6 13.2833 6.09567 13.5207 6.287 13.712C6.479 13.904 6.71667 14 7 14ZM7 11H17C17.2833 11 17.5207 10.904 17.712 10.712C17.904 10.5207 18 10.2833 18 10C18 9.71667 17.904 9.479 17.712 9.287C17.5207 9.09567 17.2833 9 17 9H7C6.71667 9 6.479 9.09567 6.287 9.287C6.09567 9.479 6 9.71667 6 10C6 10.2833 6.09567 10.5207 6.287 10.712C6.479 10.904 6.71667 11 7 11ZM7 8H17C17.2833 8 17.5207 7.90433 17.712 7.713C17.904 7.521 18 7.28333 18 7C18 6.71667 17.904 6.479 17.712 6.287C17.5207 6.09567 17.2833 6 17 6H7C6.71667 6 6.479 6.09567 6.287 6.287C6.09567 6.479 6 6.71667 6 7C6 7.28333 6.09567 7.521 6.287 7.713C6.479 7.90433 6.71667 8 7 8ZM20.3 20.3L18 18H4C3.45 18 2.97933 17.8043 2.588 17.413C2.196 17.021 2 16.55 2 16V4C2 3.45 2.196 2.979 2.588 2.587C2.97933 2.19567 3.45 2 4 2H20C20.55 2 21.021 2.19567 21.413 2.587C21.8043 2.979 22 3.45 22 4V19.575C22 20.025 21.796 20.3373 21.388 20.512C20.9793 20.6873 20.6167 20.6167 20.3 20.3ZM4 4V16H18.825L20 17.175V4H4Z"
            fill="black" />
        </g>
      </svg>
    </div>
    }
    @if(this.ownMessage) {
    <div class="svgContainer" (click)="this.toggleMessageOptionsPopUp()">
      <svg class="changeColor" width="24" height="24" viewBox="0 0 24 24" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <mask id="mask0_1823_21565" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
          height="24">
          <rect width="24" height="24" fill="#D9D9D9" />
        </mask>
        <g mask="url(#mask0_1823_21565)">
          <path
            d="M12 20C11.45 20 10.9792 19.8042 10.5875 19.4125C10.1958 19.0208 10 18.55 10 18C10 17.45 10.1958 16.9792 10.5875 16.5875C10.9792 16.1958 11.45 16 12 16C12.55 16 13.0208 16.1958 13.4125 16.5875C13.8042 16.9792 14 17.45 14 18C14 18.55 13.8042 19.0208 13.4125 19.4125C13.0208 19.8042 12.55 20 12 20ZM12 14C11.45 14 10.9792 13.8042 10.5875 13.4125C10.1958 13.0208 10 12.55 10 12C10 11.45 10.1958 10.9792 10.5875 10.5875C10.9792 10.1958 11.45 10 12 10C12.55 10 13.0208 10.1958 13.4125 10.5875C13.8042 10.9792 14 11.45 14 12C14 12.55 13.8042 13.0208 13.4125 13.4125C13.0208 13.8042 12.55 14 12 14ZM12 8C11.45 8 10.9792 7.80417 10.5875 7.4125C10.1958 7.02083 10 6.55 10 6C10 5.45 10.1958 4.97917 10.5875 4.5875C10.9792 4.19583 11.45 4 12 4C12.55 4 13.0208 4.19583 13.4125 4.5875C13.8042 4.97917 14 5.45 14 6C14 6.55 13.8042 7.02083 13.4125 7.4125C13.0208 7.80417 12.55 8 12 8Z"
            fill="#1C1B1F" />
        </g>
      </svg>
    </div>
    }
  </div>

  @if(this.messageOptionsOpen) {
  <div class="messageOptionsPopUp">
    <span (click)="editMsg()">Nachricht bearbeiten</span>
    <span (click)="deleteMessage()">Nachricht lÃ¶schen</span>
  </div>
  }


</div>